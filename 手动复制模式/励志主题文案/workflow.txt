{"type":"coze-workflow-clipboard-data","source":{"workflowId":"7565735900865855522","flowMode":0,"spaceId":"7491983279684534324","isDouyin":false,"host":"www.coze.cn"},"json":{"nodes":[{"id":"105538","type":"3","meta":{"position":{"x":-2207.8392520667703,"y":45.36646779155997}},"data":{"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","subTitle":"大模型","title":"文案"},"inputs":{"inputParameters":[{"name":"input","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"100001","name":"theme"},"rawMeta":{"type":1}}}}],"llmParam":[{"name":"temperature","input":{"type":"float","value":{"type":"literal","content":"1","rawMeta":{"type":4}}}},{"name":"maxTokens","input":{"type":"integer","value":{"type":"literal","content":"2200","rawMeta":{"type":2}}}},{"name":"spCurrentTime","input":{"type":"boolean","value":{"type":"literal","content":false,"rawMeta":{"type":3}}}},{"name":"spAntiLeak","input":{"type":"boolean","value":{"type":"literal","content":false,"rawMeta":{"type":3}}}},{"name":"thinkingType","input":{"type":"string","value":{"type":"literal","content":"enabled","rawMeta":{"type":1}}}},{"name":"responseFormat","input":{"type":"integer","value":{"type":"literal","content":"2","rawMeta":{"type":2}}}},{"name":"modleName","input":{"type":"string","value":{"type":"literal","content":"DeepSeek-V3.1","rawMeta":{"type":1}}}},{"name":"modelType","input":{"type":"integer","value":{"type":"literal","content":"1755855875","rawMeta":{"type":2}}}},{"name":"generationDiversity","input":{"type":"string","value":{"type":"literal","content":"default_val","rawMeta":{"type":1}}}},{"name":"prompt","input":{"type":"string","value":{"type":"literal","content":"{{input}}","rawMeta":{"type":1}}}},{"name":"enableChatHistory","input":{"type":"boolean","value":{"type":"literal","content":false,"rawMeta":{"type":3}}}},{"name":"chatHistoryRound","input":{"type":"integer","value":{"type":"literal","content":"3","rawMeta":{"type":2}}}},{"name":"systemPrompt","input":{"type":"string","value":{"type":"literal","content":"你是一位资深的社交媒体内容策略师与共情沟通专家，擅长撰写能引发年轻人共鸣、提供情感支持与积极引导的短文案。你的文字风格直接、温暖、有力量，能够一针见血地指出问题，并给出抚慰人心且具有操作性的建议。\n\n## 核心任务 (Core Task) ##\n根据用户提供的「标题」，创作一篇符合以下结构与风格要求的短文案。\n\n## 创作规则与结构要求 (Creation Rules & Structural Requirements) ##\n\n1.  **开头2秒钩子 (2-Second Hook):**\n    * 必须在文案开头用一句话制造强烈的情感共鸣或点出一个普遍痛点，能够瞬间抓住观众注意力。\n    * 钩子可以是否定式的反问（例如：“你是不是也常常觉得...”）、直接点出困境（例如：“焦虑个屁...”的类似直接感）或揭示一个令人意外的“真相”。\n\n2.  **主体内容 (Main Body):**\n    * **点破痛点/误区深化 (Pain Point/Misconception Elaboration):** 紧接钩子，简要展开或确认这个痛点/误区，让读者感觉“是的，这就是我”。\n    * **传递核心认知 (Deliver Core Insights - 关键句式植入):**\n        * 必须自然地、有逻辑地植入至少两句以下句式（三句都用更佳，要保证自然流畅，其中你要记住/你要明白/你要知道是完整的一行，不要再句子前后加其他字符）：\n            * “**你要记住\\n...**” (引导铭记一个重要原则或事实)\n            * “**你要明白\\n...**” (引导理解一个深层道理或原因)\n            * “**你要知道\\n...**” (引导认知到一个被忽略的方面或可能性)\n        * 这些句式引导的内容应该是文案的核心观点、转折性思考或抚慰性真相。\n    * **给出抚慰与可行性建议 (Provide Comfort & Actionable Advice):**\n        * 针对痛点，提供积极的、建设性的、可操作的建议，或是一种心态调整的指引。\n        * 可以使用如“所以你别...”、“你就...”等引导性词语。\n        * 可以引用普遍接受的哲理或比喻（如“车到山前必有路”的类似表达）。\n    * **(可选)“他/她”的叙事视角 (Optional \"He/She\" Narrative):** 如果选题合适，可以像示例中最后一段那样，引入一个“他/她”的转变故事作为榜样，增加说服力和启发性。如果使用，需简短精炼。\n\n3.  **结尾 (Conclusion):**\n    * 以积极、有力、充满希望的语句收尾。\n    * 可以是祝福、鼓励、或对读者潜能的肯定。\n    * 例如：“你远比你想象中更加优秀”、“其他的有则锦上添花，无则依旧风华”这类感觉的收尾。\n\n## 风格与限制 (Style & Restrictions) ##\n\n* **目标受众:** 主要为感到迷茫、焦虑或需要情感支持的年轻人。\n* **语气:** 直接、真诚、有力量、略带“过来人”的智慧感，避免爹味说教。有洞察力，像笔记一样精炼。\n* **表达:** 多用肯定句和祈使句。避免使用感叹号，除非在钩子处为了强调冲击力可酌情使用一个。整体追求一种平静而坚定的力量感。\n- 句子必须为**每行一句**，4~12字  \n- 禁止使用逗号、句号、顿号（仅可使用感叹号、问号） \n- 每行**自动换行**，适配短视频字幕展示  \n* **禁用:**\n    * 过多的表情符号 (emoji)。\n    * 不必要的网络流行语（除非能精准表达且不显轻浮）。\n    * 纯粹的抱怨或负面情绪堆砌（即使点出痛点，也要迅速转向积极面）。\n    * 刻意制造对立或攻击性言论。\n* **字数:** 中文200-400字左右为宜，保持精悍。\n\n## 输出格式 (Output Format) ##\n直接输出符合上述要求的文案内容，分段即可，无需其他额外说明。\n\n## 示例输入/输出 (Example Input/Output) ##\n\n**示例输入 (Example Input):**\n车到山前必有路，关关难过关关过\n\n**示例输出 (Example Output):**\n你还在焦虑什么\n你所担心的事99%都不会发生\n就算发生也一定会有解决的办法\n因为车到山前必有路\n关关难过关关过\n所以你别提前焦虑\n也别预支烦恼\n你就放平心态\n把手头的小事做好就行了\n你要记住\n人生的容错率超乎你的想象\n你以为过不去的坎\n都会在某个稀松平常的午后被抹去\n所以你就积极乐观勇敢大胆的去生活吧\n你要坚信\n你远比你想象中更加优秀\n更加强大\n最后祝你身体健康\n万事如意\n心想事成\n天天好心情","rawMeta":{"type":1}}}},{"name":"stableSystemPrompt","input":{"type":"string","value":{"type":"literal","content":"","rawMeta":{"type":1}}}},{"name":"canContinue","input":{"type":"boolean","value":{"type":"literal","content":false,"rawMeta":{"type":3}}}},{"name":"loopPromptVersion","input":{"type":"string","value":{"type":"literal","content":"","rawMeta":{"type":1}}}},{"name":"loopPromptName","input":{"type":"string","value":{"type":"literal","content":"","rawMeta":{"type":1}}}},{"name":"loopPromptId","input":{"type":"string","value":{"type":"literal","content":"","rawMeta":{"type":1}}}}],"fcParamVar":{"knowledgeFCParam":{}},"settingOnError":{"switch":false,"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"output","required":false},{"type":"string","name":"reasoning_content"}],"version":"3"},"_temp":{"bounds":{"x":-2387.8392520667703,"y":45.36646779155997,"width":360,"height":164},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","description":"调用大语言模型,使用变量和提示词生成回复","title":"大模型","mainColor":"#5C62FF","skills":[]}}},{"id":"107619","type":"4","meta":{"position":{"x":631.2821799769627,"y":605.8841453685096}},"data":{"nodeMeta":{"description":"创建草稿","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/767544b57bff428fafd23665afa42d43~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1758075633&x-signature=lhtz0eQf9zhkGGps2%2Bya4Zk2BQQ%3D","subtitle":"剪映草稿文件夹小助手:create_draft","title":"创建草稿"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7537991942484017202","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"create_draft","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7537991942483918898","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映草稿文件夹小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"height","input":{"type":"integer","value":{"type":"literal","content":768,"rawMeta":{"type":2}}}},{"name":"width","input":{"type":"integer","value":{"type":"literal","content":1024,"rawMeta":{"type":2}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"draft_id","required":false,"description":"草稿ID"}]},"_temp":{"bounds":{"x":451.28217997696265,"y":605.8841453685096,"width":360,"height":112},"externalData":{"icon":"https://lf26-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/1722314331273307_1755134156461673596_noOqGNRWn0.png?lk3s=cd508e2b&x-expires=1764412297&x-signature=kaw37C6PqT1fNShrcLIJyQEd5lg%3D","apiName":"create_draft","pluginID":"7537991942483918898","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7491992518092357686","inputs":[{"description":"高度","input":{},"name":"height","required":true,"type":"integer"},{"description":"宽度","input":{},"name":"width","required":true,"type":"integer"}],"outputs":[{"description":"草稿ID","input":{},"name":"draft_id","required":false,"type":"string"}],"updateTime":1761189030,"channel_id":2,"commercial_setting":{},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"创建草稿","title":"create_draft","mainColor":"#CA61FF"}}},{"id":"106125","type":"4","meta":{"position":{"x":631.2821799769627,"y":1153.28050491447}},"data":{"nodeMeta":{"description":"批量添加音频","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/767544b57bff428fafd23665afa42d43~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1758075633&x-signature=lhtz0eQf9zhkGGps2%2Bya4Zk2BQQ%3D","subtitle":"剪映草稿文件夹小助手:add_audios","title":"添加字幕音频"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7537991942483935282","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_audios","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7537991942483918898","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映草稿文件夹小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"draft_id","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"107619","name":"draft_id"},"rawMeta":{"type":1}}}},{"name":"infos","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"1565313","name":"audioData"},"rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"draft_id","required":false,"description":"草稿ID"},{"type":"list","name":"material_ids","schema":{"type":"string"},"required":false,"description":"素材ID列表"},{"type":"list","name":"segment_ids","schema":{"type":"string"},"required":false,"description":"片段ID列表"},{"type":"string","name":"track_id","required":false,"description":"轨道ID"}]},"_temp":{"bounds":{"x":451.28217997696265,"y":1153.28050491447,"width":360,"height":112},"externalData":{"icon":"https://lf6-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/1722314331273307_1755134156461673596_noOqGNRWn0.png?lk3s=cd508e2b&x-expires=1764412297&x-signature=sot0CmUsgLao6i%2FxjaMFnD%2FHnDQ%3D","apiName":"add_audios","pluginID":"7537991942483918898","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7491992518092357686","inputs":[{"description":"草稿ID","input":{},"name":"draft_id","required":true,"type":"string"},{"description":"音频信息列表","input":{},"name":"infos","required":true,"type":"string"}],"outputs":[{"description":"草稿ID","input":{},"name":"draft_id","required":false,"type":"string"},{"description":"素材ID列表","input":{},"name":"material_ids","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"片段ID列表","input":{},"name":"segment_ids","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"轨道ID","input":{},"name":"track_id","required":false,"type":"string"}],"updateTime":1761189030,"channel_id":2,"commercial_setting":{},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"批量添加音频","title":"add_audios","mainColor":"#CA61FF"}}},{"id":"164177","type":"4","meta":{"position":{"x":1356.288348312809,"y":71.36646779155997}},"data":{"nodeMeta":{"description":"批量添加图片","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/767544b57bff428fafd23665afa42d43~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1758075633&x-signature=lhtz0eQf9zhkGGps2%2Bya4Zk2BQQ%3D","subtitle":"剪映草稿文件夹小助手:add_images","title":"添加分镜图片"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7537991942483951666","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7537991942483918898","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映草稿文件夹小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"draft_id","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"107619","name":"draft_id"},"rawMeta":{"type":1}}}},{"name":"infos","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"1565313","name":"imageData"},"rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"draft_id","required":false,"description":"草稿ID"},{"type":"list","name":"material_ids","schema":{"type":"string"},"required":false,"description":"素材ID列表"},{"type":"list","name":"segment_ids","schema":{"type":"string"},"required":false,"description":"片段ID列表"},{"type":"list","name":"segment_infos","schema":{"type":"object","schema":[{"type":"integer","name":"end","required":false,"description":"结束时间点（微秒）"},{"type":"string","name":"id","required":false,"description":"ID"},{"type":"integer","name":"start","required":false,"description":"开始时间点（微秒）"}]},"required":false,"description":"片段信息列表"},{"type":"string","name":"track_id","required":false,"description":"轨道ID"}]},"_temp":{"bounds":{"x":1176.288348312809,"y":71.36646779155997,"width":360,"height":112},"externalData":{"icon":"https://lf6-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/1722314331273307_1755134156461673596_noOqGNRWn0.png?lk3s=cd508e2b&x-expires=1764412297&x-signature=sot0CmUsgLao6i%2FxjaMFnD%2FHnDQ%3D","apiName":"add_images","pluginID":"7537991942483918898","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7491992518092357686","inputs":[{"description":"入场动画","input":{},"name":"in_animation","required":false,"type":"string"},{"description":"图片信息列表","input":{},"name":"infos","required":true,"type":"string"},{"description":"出场动画时长（微秒）","input":{},"name":"out_animation_duration","required":false,"type":"integer"},{"description":"缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"位置，[-画布宽度，+画布宽度]","input":{},"name":"transform_x","required":false,"type":"integer"},{"description":"位置，[-画布高度，+画布高度]，默认为-0.8*画布高度，即在画布底部","input":{},"name":"transform_y","required":false,"type":"integer"},{"description":"草稿ID","input":{},"name":"draft_id","required":true,"type":"string"},{"description":"入场动画时长（微秒）","input":{},"name":"in_animation_duration","required":false,"type":"integer"},{"description":"出场动画","input":{},"name":"out_animation","required":false,"type":"string"},{"description":"缩放","input":{},"name":"scale_y","required":false,"type":"float"}],"outputs":[{"description":"片段信息列表","input":{},"name":"segment_infos","required":false,"schema":{"schema":[{"description":"ID","input":{},"name":"id","required":false,"type":"string"},{"description":"开始时间点（微秒）","input":{},"name":"start","required":false,"type":"integer"},{"description":"结束时间点（微秒）","input":{},"name":"end","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"description":"轨道ID","input":{},"name":"track_id","required":false,"type":"string"},{"description":"草稿ID","input":{},"name":"draft_id","required":false,"type":"string"},{"description":"素材ID列表","input":{},"name":"material_ids","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"片段ID列表","input":{},"name":"segment_ids","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"}],"updateTime":1761189030,"channel_id":2,"commercial_setting":{},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"批量添加图片","title":"add_images","mainColor":"#CA61FF"}}},{"id":"175385","type":"4","meta":{"position":{"x":1356.288348312809,"y":332.1859655955291}},"data":{"nodeMeta":{"description":"生成文本信息列表","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/891f6d27546b4bc9bcf9b63c6f9c9373~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1757745478&x-signature=YdfU8PR%2FxGcysAJSPJiez1i0Yfg%3D","subtitle":"剪映草稿数据生成工具:text_infos","title":"字幕信息"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7537989259517493288","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"text_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7537989256854306850","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映草稿数据生成工具","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"texts","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"1565313","name":"textList"},"rawMeta":{"type":99}}}},{"name":"timelines","input":{"type":"list","schema":{"type":"object","schema":[]},"value":{"type":"ref","content":{"source":"block-output","blockID":"1565313","name":"textTimeLines"},"rawMeta":{"type":103}}}},{"name":"border_color","input":{"type":"string","value":{"type":"literal","content":"#4a4238","rawMeta":{"type":1}}}},{"name":"color","input":{"type":"string","value":{"type":"literal","content":"#f2f2ed","rawMeta":{"type":1}}}},{"name":"font","input":{"type":"string","value":{"type":"literal","content":"兰亭圆","rawMeta":{"type":1}}}},{"name":"in_animation","input":{"type":"string","value":{"type":"literal","content":"羽化向右擦开","rawMeta":{"type":1}}}},{"name":"in_animation_duration","input":{"type":"integer","value":{"type":"literal","content":2000000,"rawMeta":{"type":2}}}},{"name":"letter_spacing","input":{"type":"integer","value":{"type":"literal","content":8,"rawMeta":{"type":2}}}},{"name":"size","input":{"type":"integer","value":{"type":"literal","content":5,"rawMeta":{"type":2}}}},{"name":"transform_y","input":{"type":"integer","value":{"type":"literal","content":-520,"rawMeta":{"type":2}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"infos","required":true,"description":"文本信息列表，JSON数组格式字符串"}]},"_temp":{"bounds":{"x":1176.288348312809,"y":332.1859655955291,"width":360,"height":112},"externalData":{"icon":"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/1722314331273307_1755133364874511740_tsEgHECun3.png?lk3s=cd508e2b&x-expires=1764412297&x-signature=bubaf2HFBRUOW2TNmNE0iQFE4iw%3D","apiName":"text_infos","pluginID":"7537989256854306850","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7491992518092357686","inputs":[{"description":"描边颜色，如#FFAACC","input":{},"name":"border_color","required":false,"type":"string"},{"description":"出场动画","input":{},"name":"out_animation","required":false,"type":"string"},{"description":"出场动画时长（微秒）","input":{},"name":"out_animation_duration","required":false,"type":"integer"},{"description":"缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"位置，[-画布高度，+画布高度]，默认为-0.8*画布高度","input":{},"name":"transform_y","required":false,"type":"integer"},{"description":"对齐方式，0/左对齐，1/居中，2/右对齐，默认为居中","input":{},"name":"align","required":false,"type":"integer"},{"description":"颜色，如#FFAABB","input":{},"name":"color","required":false,"type":"string"},{"description":"字体","input":{},"name":"font","required":false,"type":"string"},{"description":"入场动画","input":{},"name":"in_animation","required":false,"type":"string"},{"description":"字符间距","input":{},"name":"letter_spacing","required":false,"type":"integer"},{"description":"描边透明度，0到1","input":{},"name":"border_alpha","required":false,"type":"float"},{"description":"入场动画时长（微秒）","input":{},"name":"in_animation_duration","required":false,"type":"integer"},{"description":"缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"字号，默认为8","input":{},"name":"size","required":false,"type":"integer"},{"description":"透明度，0到1","input":{},"name":"alpha","required":false,"type":"float"},{"description":"行间距","input":{},"name":"line_spacing","required":false,"type":"integer"},{"description":"文本列表","input":{},"name":"texts","required":true,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"时间线列表","input":{},"name":"timelines","required":true,"schema":{"schema":[{"description":"结束时间点（微秒）","input":{},"name":"end","required":true,"type":"integer"},{"description":"开始时间点（微秒）","input":{},"name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"},{"description":"位置，[-画布宽度，+画布宽度]","input":{},"name":"transform_x","required":false,"type":"integer"}],"outputs":[{"description":"文本信息列表，JSON数组格式字符串","input":{},"name":"infos","required":true,"type":"string"}],"updateTime":1761479471,"channel_id":2,"commercial_setting":{},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"生成文本信息列表","title":"text_infos","mainColor":"#CA61FF"}}},{"id":"127991","type":"4","meta":{"position":{"x":1356.288348312809,"y":605.8841453685096}},"data":{"nodeMeta":{"description":"批量添加文本","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/492553ac457b4e0b8bd88b9bde0e59e9~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1757745295&x-signature=6eDCERjMwgLhA3Hnr%2FjXbUzN69g%3D","subtitle":"剪映草稿文件夹小助手:add_texts","title":"添加字幕"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7537991942483984434","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_texts","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7537991942483918898","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映草稿文件夹小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"draft_id","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"107619","name":"draft_id"},"rawMeta":{"type":1}}}},{"name":"infos","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"175385","name":"infos"},"rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"draft_id","required":false,"description":"草稿ID"},{"type":"list","name":"material_ids","schema":{"type":"string"},"required":false,"description":"素材ID列表"},{"type":"list","name":"segment_ids","schema":{"type":"string"},"required":false,"description":"片段ID列表"},{"type":"string","name":"track_id","required":false,"description":"轨道ID"}]},"_temp":{"bounds":{"x":1176.288348312809,"y":605.8841453685096,"width":360,"height":112},"externalData":{"icon":"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/1722314331273307_1755134156461673596_noOqGNRWn0.png?lk3s=cd508e2b&x-expires=1764412297&x-signature=BLK9tKJTwNxjj%2FEhB64yWDH%2FYB0%3D","apiName":"add_texts","pluginID":"7537991942483918898","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7491992518092357686","inputs":[{"description":"位置，[-画布宽度，+画布宽度]","input":{},"name":"transform_x","required":false,"type":"integer"},{"description":"位置，[-画布高度，+画布高度]，默认为-0.8*画布高度，即在画布底部","input":{},"name":"transform_y","required":false,"type":"integer"},{"description":"颜色，如#e70953","input":{},"name":"color","required":false,"type":"string"},{"description":"草稿ID","input":{},"name":"draft_id","required":true,"type":"string"},{"description":"入场动画","input":{},"name":"in_animation","required":false,"type":"string"},{"description":"入场动画时长（微秒）","input":{},"name":"in_animation_duration","required":false,"type":"integer"},{"description":"出场动画时长（微秒）","input":{},"name":"out_animation_duration","required":false,"type":"integer"},{"description":"对齐方式，0/左对齐，1/居中，2/右对齐，默认为1","input":{},"name":"align","required":false,"type":"integer"},{"description":"字体","input":{},"name":"font","required":false,"type":"string"},{"description":"字符间距","input":{},"name":"letter_spacing","required":false,"type":"integer"},{"description":"出场动画","input":{},"name":"out_animation","required":false,"type":"string"},{"description":"缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"透明度，0到1","input":{},"name":"alpha","required":false,"type":"float"},{"description":"缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"文本信息列表","input":{},"name":"infos","required":true,"type":"string"},{"description":"行间距","input":{},"name":"line_spacing","required":false,"type":"integer"},{"description":"字号，默认为8","input":{},"name":"size","required":false,"type":"integer"}],"outputs":[{"description":"草稿ID","input":{},"name":"draft_id","required":false,"type":"string"},{"description":"素材ID列表","input":{},"name":"material_ids","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"片段ID列表","input":{},"name":"segment_ids","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"轨道ID","input":{},"name":"track_id","required":false,"type":"string"}],"updateTime":1761189030,"channel_id":2,"commercial_setting":{},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"批量添加文本","title":"add_texts","mainColor":"#CA61FF"}}},{"id":"1812263","type":"5","meta":{"position":{"x":1356.288348312809,"y":879.5823251414896}},"data":{"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"代码_关键帧"},"inputs":{"inputParameters":[{"name":"segment_ids","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"164177","name":"segment_ids"},"rawMeta":{"type":99}}}},{"name":"duration_list","input":{"type":"list","schema":{"type":"integer"},"value":{"type":"ref","content":{"source":"block-output","blockID":"121555","name":"duration_list"},"rawMeta":{"type":100}}}}],"code":"import json\n\nasync def main(args: Args) -> Output:\n    params = args.params\n    segment_ids = params['segment_ids']\n    times = params['duration_list']\n    \n    space_time = 3000000;\n    \n    # 验证参数长度一致性\n    if len(segment_ids) != len(times) + 1:\n        raise ValueError(\"segment_ids与times数组长度不一致\")\n    \n    keyframes = []\n    \n    for idx, duration in enumerate(times):\n        \n        # 获取对应音频时长并转换微秒\n        audio_duration = int(float(duration))\n\n        seg_id = segment_ids[idx+1]\n        \n        # 根据循环索引决定缩放方向\n        if idx % 2 == 0:  # 偶数索引：1.0 -> 1.1\n            start_scale = 1.0\n            end_scale = 1.05\n        else:  # 奇数索引：1.1 -> 1.0\n            start_scale = 1.05\n            end_scale = 1.0\n        \n        key_duration = 0\n        while key_duration < audio_duration - space_time : \n\n            # 起始关键帧\n            keyframes.append({\n                \"time_offset\": key_duration, #0秒位置\n                \"property\": \"UNIFORM_SCALE\",\n                \"segment_id\": seg_id,\n                \"value\": start_scale,\n                \"easing\": \"linear\"\n            })\n            \n            key_duration += space_time\n\n            # 结束关键帧）\n            keyframes.append({\n                \"time_offset\": key_duration,  # 使用实际音频时长\n                \"property\": \"UNIFORM_SCALE\",\n                \"segment_id\": seg_id,\n                \"value\": end_scale,\n                \"easing\": \"linear\"\n            })\n\n            scale_temp = start_scale\n            start_scale = end_scale\n            end_scale = scale_temp\n        \n        # 起始关键帧\n        keyframes.append({\n            \"time_offset\": key_duration, #0秒位置\n            \"property\": \"UNIFORM_SCALE\",\n            \"segment_id\": seg_id,\n            \"value\": start_scale,\n            \"easing\": \"linear\"\n        })\n        \n        # 结束关键帧）\n        keyframes.append({\n            \"time_offset\": audio_duration,  # 使用实际音频时长\n            \"property\": \"UNIFORM_SCALE\",\n            \"segment_id\": seg_id,\n            \"value\": end_scale,\n            \"easing\": \"linear\"\n        })\n\n    return {\n        \"keyFrames\": json.dumps(keyframes)\n    }\n\n","language":3,"settingOnError":{"switch":false,"processType":1,"timeoutMs":60000,"retryTimes":0}},"outputs":[{"type":"string","name":"keyFrames"}]},"_temp":{"bounds":{"x":1176.288348312809,"y":879.5823251414896,"width":360,"height":112},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","description":"编写代码，处理输入变量来生成返回值","title":"代码","mainColor":"#00B2B2"}}},{"id":"167996","type":"4","meta":{"position":{"x":1356.288348312809,"y":1153.28050491447}},"data":{"nodeMeta":{"description":"批量添加关键帧","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/767544b57bff428fafd23665afa42d43~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1758075633&x-signature=lhtz0eQf9zhkGGps2%2Bya4Zk2BQQ%3D","subtitle":"剪映草稿文件夹小助手:add_keyframes","title":"添加关键帧"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7537991942483968050","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_keyframes","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7537991942483918898","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映草稿文件夹小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"draft_id","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"107619","name":"draft_id"},"rawMeta":{"type":1}}}},{"name":"infos","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"1812263","name":"keyFrames"},"rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"draft_id","required":false,"description":"草稿ID"}]},"_temp":{"bounds":{"x":1176.288348312809,"y":1153.28050491447,"width":360,"height":112},"externalData":{"icon":"https://lf26-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/1722314331273307_1755134156461673596_noOqGNRWn0.png?lk3s=cd508e2b&x-expires=1764412297&x-signature=kaw37C6PqT1fNShrcLIJyQEd5lg%3D","apiName":"add_keyframes","pluginID":"7537991942483918898","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7491992518092357686","inputs":[{"description":"草稿ID","input":{},"name":"draft_id","required":true,"type":"string"},{"description":"关键帧信息列表","input":{},"name":"infos","required":true,"type":"string"}],"outputs":[{"description":"草稿ID","input":{},"name":"draft_id","required":false,"type":"string"}],"updateTime":1761189030,"channel_id":2,"commercial_setting":{},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"批量添加关键帧","title":"add_keyframes","mainColor":"#CA61FF"}}},{"id":"169807","type":"15","meta":{"position":{"x":2199.0213617364307,"y":332.1859655955291}},"data":{"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"生成下载地址"},"inputs":{"method":"concat","inputParameters":[{"name":"String1","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"107619","name":"draft_id"},"rawMeta":{"type":1}}}}],"concatParams":[{"name":"concatResult","input":{"type":"string","value":{"type":"literal","content":"https://cdn-rd-aiqnwmini.vas.lutongnet.com/aiqnwmini/download-draft/index.html?draftId={{String1}}","rawMeta":{"type":1}}}},{"name":"arrayItemConcatChar","input":{"type":"string","value":{"type":"literal","content":"，","rawMeta":{"type":1}}}},{"name":"allArrayItemConcatChars","input":{"type":"list","schema":{"type":"object","schema":[{"type":"string","name":"label","required":true},{"type":"string","name":"value","required":true},{"type":"boolean","name":"isDefault","required":true}]},"value":{"type":"literal","content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}]}}}]},"outputs":[{"type":"string","name":"output","required":true}]},"_temp":{"bounds":{"x":2019.0213617364307,"y":332.1859655955291,"width":360,"height":112},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","description":"用于处理多个字符串类型变量的格式","title":"文本处理","mainColor":"#3071F2"}}},{"id":"142888","type":"4","meta":{"position":{"x":631.2821799769627,"y":71.36646779155997}},"data":{"nodeMeta":{"description":"根据关键词搜索背景音乐","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"背景音乐库:search_bgm","title":"search_bgm"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7477778304427261963","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"search_bgm","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7477778304427245579","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"背景音乐库","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"keyword","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"1165778","name":"bgm_name"},"rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"list","name":"data","schema":{"type":"object","schema":[{"type":"string","name":"bgm_url","required":false},{"type":"list","name":"bgm_urls","schema":{"type":"string"},"required":false},{"type":"object","name":"cover_url","schema":[{"type":"string","name":"hd","required":false},{"type":"string","name":"large","required":false},{"type":"string","name":"medium","required":false},{"type":"string","name":"thumb","required":false}],"required":false},{"type":"integer","name":"duration","required":false},{"type":"list","name":"timelines","schema":{"type":"object","schema":[{"type":"integer","name":"end","required":false},{"type":"integer","name":"start","required":false}]},"required":false},{"type":"string","name":"title","required":false}]},"required":false},{"type":"string","name":"message","required":false},{"type":"boolean","name":"success","required":false}]},"_temp":{"bounds":{"x":451.28217997696265,"y":71.36646779155997,"width":360,"height":112},"externalData":{"icon":"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/3778360647354254_1741054893759568570_tH5ww0mcxx.jpeg?lk3s=cd508e2b&x-expires=1764412297&x-signature=UQJ4kVZawIqDwfOYF5hlhwwmigQ%3D","apiName":"search_bgm","pluginID":"7477778304427245579","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7391771569926127635","inputs":[{"description":"关键词","input":{},"name":"keyword","required":true,"type":"string"}],"outputs":[{"input":{},"name":"data","required":false,"schema":{"schema":[{"input":{},"name":"timelines","required":false,"schema":{"schema":[{"input":{},"name":"end","required":false,"type":"integer"},{"input":{},"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"input":{},"name":"title","required":false,"type":"string"},{"input":{},"name":"bgm_url","required":false,"type":"string"},{"input":{},"name":"bgm_urls","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"},{"input":{},"name":"cover_url","required":false,"schema":[{"input":{},"name":"hd","required":false,"type":"string"},{"input":{},"name":"large","required":false,"type":"string"},{"input":{},"name":"medium","required":false,"type":"string"},{"input":{},"name":"thumb","required":false,"type":"string"}],"type":"object"},{"input":{},"name":"duration","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"input":{},"name":"message","required":false,"type":"string"},{"input":{},"name":"success","required":false,"type":"boolean"}],"updateTime":1761816546,"channel_id":2,"commercial_setting":{},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"根据关键词搜索背景音乐","title":"search_bgm","mainColor":"#CA61FF"}}},{"id":"1466509","type":"5","meta":{"position":{"x":631.2821799769627,"y":332.1859655955291}},"data":{"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"代码_背景音乐挑选"},"inputs":{"inputParameters":[{"name":"music_list","input":{"type":"list","schema":{"type":"object","schema":[{"type":"string","name":"bgm_url","required":false},{"type":"list","name":"bgm_urls","schema":{"type":"string"},"required":false},{"type":"object","name":"cover_url","schema":[{"type":"string","name":"hd","required":false},{"type":"string","name":"large","required":false},{"type":"string","name":"medium","required":false},{"type":"string","name":"thumb","required":false}],"required":false},{"type":"integer","name":"duration","required":false},{"type":"list","name":"timelines","schema":{"type":"object","schema":[{"type":"integer","name":"end","required":false},{"type":"integer","name":"start","required":false}]},"required":false},{"type":"string","name":"title","required":false}]},"value":{"type":"ref","content":{"source":"block-output","blockID":"142888","name":"data"},"rawMeta":{"type":103}}}},{"name":"duration","input":{"type":"integer","value":{"type":"ref","content":{"source":"block-output","blockID":"1565313","name":"duration"},"rawMeta":{"type":2}}}}],"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n\n    const { music_list, duration } = params;\n\n    // 处理音频数据\n    const audioData = [];\n    const audioArr = [];\n\n    for(var i=0;i<music_list.length;i++){\n        var music = music_list[i];\n        if(music.bgm_url && music.duration > duration){\n            audioArr.push({\n                url: music.bgm_url,\n                duration:duration,\n                start: 0,\n                end:  duration,\n                volume: 0.4\n            });\n        }\n    }\n    \n    \n    if(audioArr.length>0){\n        var randomIndex = Math.floor(Math.random() * audioArr.length);\n        audioData.push(audioArr[randomIndex]);\n    }\n\n    \n    // 构建输出对象\n    const ret = {\n        \"audioData\": JSON.stringify(audioData)\n    };\n\n    return ret;\n}\n\n\n\n","language":5,"settingOnError":{"switch":false,"processType":1,"timeoutMs":60000,"retryTimes":0}},"outputs":[{"type":"string","name":"audioData"}],"version":"v2"},"_temp":{"bounds":{"x":451.28217997696265,"y":332.1859655955291,"width":360,"height":112},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","description":"编写代码，处理输入变量来生成返回值","title":"代码","mainColor":"#00B2B2"}}},{"id":"1698626","type":"4","meta":{"position":{"x":631.2821799769627,"y":879.5823251414896}},"data":{"nodeMeta":{"description":"批量添加音频","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/767544b57bff428fafd23665afa42d43~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1758075633&x-signature=lhtz0eQf9zhkGGps2%2Bya4Zk2BQQ%3D","subtitle":"剪映草稿文件夹小助手:add_audios","title":"添加背景音"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7537991942483935282","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_audios","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7537991942483918898","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映草稿文件夹小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"draft_id","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"107619","name":"draft_id"},"rawMeta":{"type":1}}}},{"name":"infos","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"1466509","name":"audioData"},"rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"draft_id","required":false,"description":"草稿ID"},{"type":"list","name":"material_ids","schema":{"type":"string"},"required":false,"description":"素材ID列表"},{"type":"list","name":"segment_ids","schema":{"type":"string"},"required":false,"description":"片段ID列表"},{"type":"string","name":"track_id","required":false,"description":"轨道ID"}]},"_temp":{"bounds":{"x":451.28217997696265,"y":879.5823251414896,"width":360,"height":112},"externalData":{"icon":"https://lf6-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/1722314331273307_1755134156461673596_noOqGNRWn0.png?lk3s=cd508e2b&x-expires=1764412297&x-signature=sot0CmUsgLao6i%2FxjaMFnD%2FHnDQ%3D","apiName":"add_audios","pluginID":"7537991942483918898","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7491992518092357686","inputs":[{"description":"草稿ID","input":{},"name":"draft_id","required":true,"type":"string"},{"description":"音频信息列表","input":{},"name":"infos","required":true,"type":"string"}],"outputs":[{"description":"草稿ID","input":{},"name":"draft_id","required":false,"type":"string"},{"description":"素材ID列表","input":{},"name":"material_ids","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"片段ID列表","input":{},"name":"segment_ids","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"轨道ID","input":{},"name":"track_id","required":false,"type":"string"}],"updateTime":1761189030,"channel_id":2,"commercial_setting":{},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"批量添加音频","title":"add_audios","mainColor":"#CA61FF"}}},{"id":"1565313","type":"5","meta":{"position":{"x":-28.06634182872176,"y":71.36646779155997}},"data":{"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"代码_视频组装"},"inputs":{"inputParameters":[{"name":"scenes","input":{"type":"list","schema":{"type":"object","schema":[{"type":"string","name":"cap"},{"type":"string","name":"desc_prompt"}]},"value":{"type":"ref","content":{"source":"block-output","blockID":"1165778","name":"scenes"},"rawMeta":{"type":103}}}},{"name":"image_list","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"121555","name":"image_list"},"rawMeta":{"type":99}}}},{"name":"link_list","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"121555","name":"link_list"},"rawMeta":{"type":99}}}},{"name":"duration_list","input":{"type":"list","schema":{"type":"integer"},"value":{"type":"ref","content":{"source":"block-output","blockID":"121555","name":"duration_list"},"rawMeta":{"type":100}}}},{"name":"main_link","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"1859832","name":"data.link"},"rawMeta":{"type":1}}}},{"name":"main_duration","input":{"type":"integer","value":{"type":"ref","content":{"source":"block-output","blockID":"1088914","name":"duration"},"rawMeta":{"type":2}}}},{"name":"main","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"1165778","name":"main"},"rawMeta":{"type":1}}}},{"name":"key_image","input":{"type":"string","assistType":2,"value":{"type":"ref","content":{"source":"block-output","blockID":"151598","name":"data"},"rawMeta":{"type":7}}}}],"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n\n    const { image_list, link_list, duration_list, scenes, key_image, main_duration, main_link,main } = params;\n\n    image_list.unshift(key_image);\n    link_list.unshift(main_link);\n    duration_list.unshift(main_duration);\n    scenes.unshift({\n        cap:main\n    });\n\n    const space_time = 100000;\n    // 处理音频数据\n    const audioData = [];\n    let audioStartTime = 0;\n    let maxDuration = 0;\n\n    const durationList = [];\n    const textTimeLines = [];\n    const textList = [];\n\n    const imageData = [];\n    \n    \n    for (let i = 0; i < link_list.length; i++) {\n        const duration = duration_list[i];\n        let word_time = space_time * 2;\n        if(link_list[i]){\n            audioData.push({\n                url: link_list[i],\n                duration:duration,\n                start: audioStartTime + word_time,\n                end: audioStartTime + word_time + duration\n            });\n            word_time += space_time * 2 + duration;\n        }\n         \n        if((i-1)%2==0){\n            imageData.push({\n                url: image_list[i],\n                start: audioStartTime,\n                end: audioStartTime + word_time,\n                in_animation: \"轻微放大\",\n                in_animation_duration: 100000\n            });\n        } else{\n            imageData.push({\n                url: image_list[i],\n                start: audioStartTime,\n                end: audioStartTime + word_time\n            });\n        }\n        durationList.push(word_time);\n        audioStartTime += word_time;\n    }\n    \n        \n    const captions = scenes.map(item => item.cap);\n    const subtitleDurations = durationList;\n        \n    const { textTimelines, processedSubtitles } = processSubtitles(\n        captions,\n        subtitleDurations\n    );\n    \n    // 构建输出对象\n    const ret = {\n        \"audioData\": JSON.stringify(audioData),\n        \"imageData\": JSON.stringify(imageData),\n        \"durationList\":durationList,\n        \"textTimeLines\":textTimelines,\n        \"textList\":processedSubtitles,\n        \"duration\":audioStartTime\n    };\n\n    return ret;\n}\n\nconst SUB_CONFIG = {\n    MAX_LINE_LENGTH: 19,\n    SPLIT_PRIORITY: ['。','！','？','，',',','：',':','、','；',';',' '], // 补充句子结束符\n    TIME_PRECISION: 3\n};\n\nfunction splitLongPhrase(text, maxLen) {\n    if (text.length <= maxLen) return [text];\n    \n    // 严格在maxLen范围内查找分隔符\n    for (const delimiter of SUB_CONFIG.SPLIT_PRIORITY) {\n        const pos = text.lastIndexOf(delimiter, maxLen - 1); // 关键修改：限制查找范围\n        if (pos > 0) {\n            const splitPos = pos + 1;\n            return [\n                text.substring(0, splitPos).trim(),\n                ...splitLongPhrase(text.substring(splitPos).trim(), maxLen)\n            ];\n        }\n    }\n\n    // 汉字边界检查防止越界\n    const startPos = Math.min(maxLen, text.length) - 1;\n    for (let i = startPos; i > 0; i--) {\n        if (/[\\p{Unified_Ideograph}]/u.test(text[i])) {\n            return [\n                text.substring(0, i + 1).trim(),\n                ...splitLongPhrase(text.substring(i + 1).trim(), maxLen)\n            ];\n        }\n    }\n\n    // 强制分割时保证不超过maxLen\n    const splitPos = Math.min(maxLen, text.length);\n    return [\n        text.substring(0, splitPos).trim(),\n        ...splitLongPhrase(text.substring(splitPos).trim(), maxLen)\n    ];\n}\n\nconst processSubtitles = (\n    captions,\n    subtitleDurations,\n    startTimeμs = 0 // 新增参数：起始时间（单位微秒，默认0）\n  ) => {\n    const cleanRegex = /[\\u3000\\u3002-\\u303F\\uff00-\\uffef\\u2000-\\u206F!\"#$%&'()*+\\-./<=>?@\\\\^_`{|}~]/g;\n    \n    let processedSubtitles = [];\n    let processedSubtitleDurations = [];\n    \n    captions.forEach((text, index) => {\n      const totalDuration = subtitleDurations[index];\n      let phrases = splitLongPhrase(text, SUB_CONFIG.MAX_LINE_LENGTH);\n      \n      phrases = phrases.map(p => p.replace(cleanRegex, '').trim())\n                     .filter(p => p.length > 0);\n  \n      if (phrases.length === 0) {\n        processedSubtitles.push('');\n        processedSubtitleDurations.push(totalDuration);\n        return;\n      }\n  \n      const totalChars = phrases.reduce((sum, p) => sum + p.length, 0);\n      let accumulatedμs = 0;\n      \n      phrases.forEach((phrase, i) => {\n        const ratio = phrase.length / totalChars;\n        let durationμs = i === phrases.length - 1 \n          ? totalDuration - accumulatedμs\n          : Math.round(totalDuration * ratio);\n  \n        processedSubtitles.push(phrase);\n        processedSubtitleDurations.push(durationμs);\n        accumulatedμs += durationμs;\n      });\n    });\n  \n    // 时间轴生成（从指定起始时间开始）\n    const textTimelines = [];\n    let currentTime = startTimeμs; // 使用传入的起始时间\n    \n    processedSubtitleDurations.forEach(durationμs => {\n      const start = currentTime;\n      const end = start + durationμs;\n      \n      textTimelines.push({\n        start: start, // 直接使用整数\n        end: end\n      });\n      \n      currentTime = end; // 自动累计到下一段\n    });\n  \n    return { textTimelines, processedSubtitles };\n  };\n\n\n\n","language":5,"settingOnError":{"switch":false,"processType":1,"timeoutMs":60000,"retryTimes":0}},"outputs":[{"type":"string","name":"audioData"},{"type":"string","name":"imageData"},{"type":"list","name":"durationList","schema":{"type":"integer"}},{"type":"list","name":"textTimeLines","schema":{"type":"object","schema":[]}},{"type":"list","name":"textList","schema":{"type":"string"}},{"type":"integer","name":"duration"}],"version":"v2"},"_temp":{"bounds":{"x":-208.06634182872176,"y":71.36646779155997,"width":360,"height":112},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","description":"编写代码，处理输入变量来生成返回值","title":"代码","mainColor":"#00B2B2"}}},{"id":"1165778","type":"3","meta":{"position":{"x":-1628.948681377834,"y":45.36646779155997}},"data":{"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","subTitle":"大模型","title":"大模型_分镜"},"inputs":{"inputParameters":[{"name":"content","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"105538","name":"output"},"rawMeta":{"type":1}}}},{"name":"count","input":{"type":"integer","value":{"type":"ref","content":{"source":"block-output","blockID":"100001","name":"count"},"rawMeta":{"type":2}}}}],"llmParam":[{"name":"temperature","input":{"type":"float","value":{"type":"literal","content":"1","rawMeta":{"type":4}}}},{"name":"maxTokens","input":{"type":"integer","value":{"type":"literal","content":"2200","rawMeta":{"type":2}}}},{"name":"spCurrentTime","input":{"type":"boolean","value":{"type":"literal","content":false,"rawMeta":{"type":3}}}},{"name":"spAntiLeak","input":{"type":"boolean","value":{"type":"literal","content":false,"rawMeta":{"type":3}}}},{"name":"prefixCache","input":{"type":"boolean","value":{"type":"literal","content":false,"rawMeta":{"type":3}}}},{"name":"responseFormat","input":{"type":"integer","value":{"type":"literal","content":"2","rawMeta":{"type":2}}}},{"name":"modleName","input":{"type":"string","value":{"type":"literal","content":"DeepSeek-R1","rawMeta":{"type":1}}}},{"name":"modelType","input":{"type":"integer","value":{"type":"literal","content":"1738675233","rawMeta":{"type":2}}}},{"name":"generationDiversity","input":{"type":"string","value":{"type":"literal","content":"default_val","rawMeta":{"type":1}}}},{"name":"prompt","input":{"type":"string","value":{"type":"literal","content":"故事原文内容：\n{{content}}","rawMeta":{"type":1}}}},{"name":"enableChatHistory","input":{"type":"boolean","value":{"type":"literal","content":false,"rawMeta":{"type":3}}}},{"name":"chatHistoryRound","input":{"type":"integer","value":{"type":"literal","content":"3","rawMeta":{"type":2}}}},{"name":"systemPrompt","input":{"type":"string","value":{"type":"literal","content":"# 角色\n你是一位专业且经验丰富的文案推文分镜大师，对各类题材的文案有深入理解。凭借深厚专业素养、丰富经验和敏锐洞察力，能精准剖析文案核心元素，为文案推文提供清晰、全面且具指导性的内容，语言生动形象、具体入微。\n\n## 技能\n### 技能1：分析与截取文案\n1. 接收用户提供的文案后，运用专业知识和分析能力，全面细致地分析其中核心要素。\n2. 根据文案内容，在保证能清晰完整体现文案主旨的前提下，合理截取一定长度内容，确保后续分镜时，镜头数量不超过用户给出的镜头数量{{count}}。\n\n### 技能2：生成分镜字幕和绘画提示\n1. 对截取的文案内容进行科学合理分镜，生成精准字幕cap：\n    - 字幕文案分段规则：第一句单独成一个分镜，后续每个段落由2句话构成。字幕文案需简洁明了、表达清晰流畅，同时具备独特节奏感，以增强推文吸引力。\n    - 严格依据用户提供的原文进行分割，确保前后文紧密关联且连贯，不允许对原文进行任何修改、删减。\n2. 依据分镜字幕cap，精心生成分镜绘画提示词desc_prompt，每个提示词要全方位详细描述画面内容，涵盖人物动作姿态、表情神态、服装配饰，场景布置、色彩风格等诸多细节。\n    - 风格：卡通手绘。\n    - 人物：使用以下固定词语进行描述“Head: Rounded oval head, white filling, large white space on the face, body structure: typical of stickmen, with a torso and limbs formed by slender black lines.”\n    - 表情神态：从开心、欢乐、狂喜、雀跃、欢欣、欣慰、满足、陶醉、亢奋、心花怒放等表情神态中选取进行明确描述。\n    - 人物动作：详细给出<动作描述（两根火柴线条能做出来的动作）>。\n    - 背景：详细给出<场景描述>，色彩需明快。\n===回复示例===\n[{\n          \"cap\":\"字幕文案\",\n          \"desc_prompt\":\"分镜图像提示词\"\n}]\n===示例结束===\n\n### 技能 3: 背景音风格选择\n根据上述生成的分镜信息，挑选合适风格的纯音乐背景音（bgm_name），例如：悠闲轻松（纯音乐）。\n\n### 技能 4: 总结分镜\n1. 根据上述生成的分镜信息，用四个字（key）对分镜文案进行概括。\n1. 根据上述生成的分镜信息，用一句话（main）概括分镜文案的主题，不超过12个字。\n\n## 限制:\n- 仅围绕用户提供的文案开展分镜推文提示词生成工作，不回答与该任务无关的任何话题。\n- 输出内容逻辑要清晰、有条理，分镜推文提示词要尽可能详尽、全面地描述画面，为后续创作提供充足指导。\n- 推文文案及分镜描述必须保持高度一致，确保内容准确、连贯。\n- 输出内容严格按照给定的 JSON 格式规范组织，不得偏离框架要求。\n- 只针对用户提供的内容进行分镜操作，不更改原文内容。\n- 仅依据用户提供的内容生成分镜图像提示词，严格遵循原文，不擅自修改。\n- 仔细且严格检查输出的json格式正确性并及时修正，特别留意json格式中括号、逗号等标点符号的正确使用 。 \n- 对分镜的总结要全方面覆盖分镜的内容，不要过于片面\n\n## 补充说明\n为确保内容准确，涉及特定知识或真实人物相关信息时，可通过搜索工具或浏览器在互联网上查找相关知识，明确信息来源的准确性。  ","rawMeta":{"type":1}}}},{"name":"stableSystemPrompt","input":{"type":"string","value":{"type":"literal","content":"","rawMeta":{"type":1}}}},{"name":"canContinue","input":{"type":"boolean","value":{"type":"literal","content":false,"rawMeta":{"type":3}}}},{"name":"loopPromptVersion","input":{"type":"string","value":{"type":"literal","content":"","rawMeta":{"type":1}}}},{"name":"loopPromptName","input":{"type":"string","value":{"type":"literal","content":"","rawMeta":{"type":1}}}},{"name":"loopPromptId","input":{"type":"string","value":{"type":"literal","content":"","rawMeta":{"type":1}}}}],"fcParamVar":{"knowledgeFCParam":{}},"settingOnError":{"switch":false,"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"list","name":"scenes","schema":{"type":"object","schema":[{"type":"string","name":"cap"},{"type":"string","name":"desc_prompt"}]}},{"type":"string","name":"bgm_name"},{"type":"string","name":"key"},{"type":"string","name":"main"},{"type":"string","name":"reasoning_content"}],"version":"3"},"_temp":{"bounds":{"x":-1808.948681377834,"y":45.36646779155997,"width":360,"height":164},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","description":"调用大语言模型,使用变量和提示词生成回复","title":"大模型","mainColor":"#5C62FF"}}},{"id":"121555","type":"28","meta":{"position":{"x":-1099.3650319718045,"y":71.36646779155997},"canvasPosition":{"x":-2251.458997972841,"y":445.12355075288207}},"data":{"inputs":{"batchSize":{"type":"integer","value":{"type":"literal","content":200,"rawMeta":{"type":2}}},"concurrentSize":{"type":"integer","value":{"type":"literal","content":3,"rawMeta":{"type":2}}},"inputParameters":[{"name":"scenes","input":{"type":"list","schema":{"type":"object","schema":[{"type":"string","name":"cap"},{"type":"string","name":"desc_prompt"}]},"value":{"type":"ref","content":{"source":"block-output","blockID":"1165778","name":"scenes"},"rawMeta":{"type":103}}}}]},"nodeMeta":{"description":"通过设定批量运行次数和逻辑，运行批处理体内的任务","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Batch-v2.jpg","mainColor":"#00B2B2","subTitle":"批处理","title":"批处理"},"outputs":[{"name":"image_list","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"187299","name":"image_url"},"rawMeta":{"type":1}}}},{"name":"link_list","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"182040","name":"data.link"},"rawMeta":{"type":1}}}},{"name":"duration_list","input":{"type":"list","schema":{"type":"integer"},"value":{"type":"ref","content":{"source":"block-output","blockID":"158063","name":"duration"},"rawMeta":{"type":2}}}}]},"blocks":[{"id":"131139","type":"16","meta":{"position":{"x":172.9251094681401,"y":-1.9999999999999147}},"data":{"inputs":{"apiParam":null,"inputParameters":[{"name":"desc_prompt","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"121555","name":"scenes.desc_prompt"},"rawMeta":{"type":1}}}}],"modelSetting":{"custom_ratio":{"height":768,"ratio_type":"fixed","width":1024},"ddim_steps":40,"images_reference":{},"model":8,"ratio":0},"prompt":{"negative_prompt":"","prompt":"{{desc_prompt}}"},"references":[],"settingOnError":{"switch":false,"processType":1,"timeoutMs":60000,"retryTimes":0}},"nodeMeta":{"description":"通过文字描述/添加参考图生成图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-ImageGeneration-v2.jpg","subTitle":"图像生成","title":"图像生成"},"outputs":[{"type":"string","assistType":2,"name":"data","required":false},{"type":"string","name":"msg","required":false}],"settingOnError":{"settingOnErrorIsOpen":false,"processType":1,"timeoutMs":60000,"retryTimes":0},"settings":null,"version":""},"_temp":{"bounds":{"x":-2258.5338885047013,"y":443.1235507528821,"width":360,"height":164},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-ImageGeneration-v2.jpg","description":"通过文字描述/添加参考图生成图片","title":"图像生成","mainColor":"#FF4DC3"}}},{"id":"133787","type":"8","meta":{"position":{"x":704.4523539359748,"y":10.999999999999972}},"data":{"nodeMeta":{"description":"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","mainColor":"#00B2B2","subTitle":"选择器","title":"选择器"},"inputs":{"branches":[{"condition":{"logic":2,"conditions":[{"operator":10,"left":{"input":{"type":"string","assistType":2,"value":{"type":"ref","content":{"source":"block-output","blockID":"131139","name":"data"},"rawMeta":{"type":7}}}}}]}}]}},"_temp":{"bounds":{"x":-1727.0066440368664,"y":456.123550752882,"width":360,"height":138},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","description":"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支","title":"选择器","mainColor":"#00B2B2"}}},{"id":"187299","type":"5","meta":{"position":{"x":2131.2628225339336,"y":24.000000000000064}},"data":{"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"代码_合并数据"},"inputs":{"inputParameters":[{"name":"image1","input":{"type":"string","assistType":2,"value":{"type":"ref","content":{"source":"block-output","blockID":"131139","name":"data"},"rawMeta":{"type":7}}}},{"name":"image2","input":{"type":"string","assistType":2,"value":{"type":"ref","content":{"source":"block-output","blockID":"1667619","name":"data"},"rawMeta":{"type":7}}}}],"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n\n\n    var image1 = params.image1;\n    var image2 = params.image2;\n    if(!image1){\n        image1 = image2;\n    }\n\n\n\n    // 构建输出对象\n    const ret = {\n        \"image_url\":  image1\n    };\n\n    return ret;\n}","language":5,"settingOnError":{"switch":false,"processType":1,"timeoutMs":60000,"retryTimes":0}},"outputs":[{"type":"string","name":"image_url"}],"version":"v2"},"_temp":{"bounds":{"x":-300.19617543890763,"y":469.1235507528821,"width":360,"height":112},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","description":"编写代码，处理输入变量来生成返回值","title":"代码","mainColor":"#00B2B2"}}},{"id":"1667619","type":"16","meta":{"position":{"x":1636.4930451287028,"y":179.40087574512054}},"data":{"inputs":{"apiParam":null,"inputParameters":[{"name":"desc_prompt","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"184845","name":"data"},"rawMeta":{"type":1}}}}],"modelSetting":{"custom_ratio":{"height":768,"ratio_type":"fixed","width":1024},"ddim_steps":40,"images_reference":{},"model":8,"ratio":0},"prompt":{"negative_prompt":"","prompt":"{{desc_prompt}}"},"references":[],"settingOnError":{"switch":false,"processType":1,"timeoutMs":60000,"retryTimes":0}},"nodeMeta":{"description":"通过文字描述/添加参考图生成图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-ImageGeneration-v2.jpg","subTitle":"图像生成","title":"图像生成_补图"},"outputs":[{"type":"string","assistType":2,"name":"data","required":false},{"type":"string","name":"msg","required":false}],"settingOnError":{"settingOnErrorIsOpen":false,"processType":1,"timeoutMs":60000,"retryTimes":0},"settings":null,"version":""},"_temp":{"bounds":{"x":-794.9659528441384,"y":624.5244264980026,"width":360,"height":164},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-ImageGeneration-v2.jpg","description":"通过文字描述/添加参考图生成图片","title":"图像生成","mainColor":"#FF4DC3"}}},{"id":"182040","type":"4","meta":{"position":{"x":172.92510946814002,"y":385.9999999999996}},"data":{"nodeMeta":{"description":"根据音色和文本合成音频","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/dc534eb73e7046b1807db96af7c0e212~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1749019302&x-signature=ANAaS2aakkuW4eUDLIx7DP8XEoI%3D","subtitle":"语音合成:speech_synthesis","title":"speech_synthesis_1"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7426655854067367946","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"speech_synthesis","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7426655854067351562","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"语音合成","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"text","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"121555","name":"scenes.cap"},"rawMeta":{"type":1}}}},{"name":"speed_ratio","input":{"type":"float","value":{"type":"literal","content":1,"rawMeta":{"type":4}}}},{"name":"voice_id","input":{"type":"string","assistType":12,"value":{"type":"literal","content":"7468512265151725595","rawMeta":{"fileName":"霸气青叔","type":18}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"float","name":"code","required":false},{"type":"object","name":"data","schema":[{"type":"float","name":"duration","required":false,"description":"音频时长，单位是s"},{"type":"string","name":"link","required":false}],"required":false},{"type":"string","name":"log_id","required":false},{"type":"string","name":"msg","required":false}]},"_temp":{"bounds":{"x":-2258.5338885047013,"y":831.1235507528817,"width":360,"height":136},"externalData":{"icon":"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/372098605791453_1729153029627658847_7vpeyBUsGn.jpeg?lk3s=cd508e2b&x-expires=1764412297&x-signature=XqwxRVi5OcX%2BGA9Dbj3PjNR9SYs%3D","apiName":"speech_synthesis","pluginID":"7426655854067351562","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7315016311652941851","inputs":[{"assistType":12,"description":"扣子音色 ID，支持选择扣子系统预置的音色或资源库中复刻的音色。 可以在操作页面直接选择音色，或通过系统音色列表https://www.coze.cn/open/docs/dev_how_to_guides/sys_voice查看音色 ID。","input":{},"name":"voice_id","required":false,"type":"string"},{"description":"语音情感","input":{},"name":"emotion","required":false,"type":"string"},{"defaultValue":3,"description":"调用emotion设置情感参数后可使用emotion_scale进一步设置情绪值，范围1~5，不设置时默认值为4。 注：理论上情绪值越大，情感越明显。但情绪值1~5实际为非线性增长，可能存在超过某个值后，情绪增加不明显，例如设置3和5时情绪值可能接近。","input":{},"name":"emotion_scale","required":false,"type":"float"},{"description":"音色的语种，非必填，所有中文音色支持中英文混合场景。可参考系统音色列表https://www.coze.cn/open/docs/dev_how_to_guides/sys_voice查看各音色支持的语种。","input":{},"name":"language","required":false,"type":"string"},{"defaultValue":"爽快思思/Skye","description":"音色ID，默认为爽快思思/Skye。详细音色列表参考 https://www.coze.cn/open/docs/guides/text_to_speech_plugin, default value is 爽快思思/Skye","input":{},"name":"speaker_id","required":false,"type":"string"},{"defaultValue":1,"description":"语速，范围是[0.2,3]，默认为1，通常保留一位小数即可, default value is 1","input":{},"name":"speed_ratio","required":false,"type":"float"},{"description":"要合成音频的文本内容","input":{},"name":"text","required":true,"type":"string"}],"outputs":[{"input":{},"name":"data","required":false,"schema":[{"description":"音频时长，单位是s","input":{},"name":"duration","required":false,"type":"float"},{"input":{},"name":"link","required":false,"type":"string"}],"type":"object"},{"input":{},"name":"log_id","required":false,"type":"string"},{"input":{},"name":"msg","required":false,"type":"string"},{"input":{},"name":"code","required":false,"type":"float"}],"updateTime":1761816746,"channel_id":2,"commercial_setting":{"business_type":1,"commercial_type":1},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"根据音色和文本合成音频。按照字符数计费，计费项&免费额度说明：https://www.coze.cn/open/docs/coze_pro/asr_tts_fee。使用资源库音色时，计费项为复刻音色文字转语音字数；使用预设音色时，模型为大模型对应系统音色文字转语音字数，小模型对应小模型合成次数 。","title":"speech_synthesis","mainColor":"#CA61FF"}}},{"id":"184845","type":"4","meta":{"position":{"x":1178.6002374805955,"y":205.4008757451205}},"data":{"nodeMeta":{"description":"智能优化图像提示词","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-plugin-better_prompt-v2.jpg","subtitle":"提示词优化:sd_better_prompt","title":"sd_better_prompt"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7439197952104726528","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"sd_better_prompt","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7439197952104710144","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"提示词优化","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"prompt","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"121555","name":"scenes.desc_prompt"},"rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"string","name":"data","required":false},{"type":"string","name":"msg","required":false}]},"_temp":{"bounds":{"x":-1252.8587604922457,"y":650.5244264980025,"width":360,"height":112},"externalData":{"icon":"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/1682717607724762_1737442044729286337_eWiqvwPv2g.jpg?lk3s=cd508e2b&x-expires=1764412297&x-signature=NvtK5%2Fdbf7b%2Ba2ovCq5tq5oJZqE%3D","apiName":"sd_better_prompt","pluginID":"7439197952104710144","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7352795533666664448","inputs":[{"description":"prompt","input":{},"name":"prompt","required":true,"title":"提示词","type":"string"}],"outputs":[{"input":{},"name":"data","required":false,"type":"string"},{"input":{},"name":"msg","required":false,"type":"string"}],"updateTime":1761817850,"channel_id":2,"commercial_setting":{"business_type":1,"commercial_type":1},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"智能优化图像提示词","title":"sd_better_prompt","mainColor":"#CA61FF"}}},{"id":"158063","type":"4","meta":{"position":{"x":1636.4930451287028,"y":409.9999999999996}},"data":{"nodeMeta":{"description":"获取音频时长（微秒）","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/891f6d27546b4bc9bcf9b63c6f9c9373~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1758077933&x-signature=llFA%2Ba6ed6Tg%2BfbPGMN2lCB2DHA%3D","subtitle":"剪映草稿数据生成工具:get_audio_duration","title":"get_audio_duration"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7537989256854372386","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"get_audio_duration","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7537989256854306850","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映草稿数据生成工具","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"url","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"182040","name":"data.link"},"rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"integer","name":"duration","required":true,"description":"时长（微秒）"}]},"_temp":{"bounds":{"x":-794.9659528441384,"y":855.1235507528817,"width":360,"height":112},"externalData":{"icon":"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/1722314331273307_1755133364874511740_tsEgHECun3.png?lk3s=cd508e2b&x-expires=1764412297&x-signature=bubaf2HFBRUOW2TNmNE0iQFE4iw%3D","apiName":"get_audio_duration","pluginID":"7537989256854306850","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7491992518092357686","inputs":[{"description":"音频地址","input":{},"name":"url","required":true,"type":"string"}],"outputs":[{"description":"时长（微秒）","input":{},"name":"duration","required":true,"type":"integer"}],"updateTime":1761479471,"channel_id":2,"commercial_setting":{},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"获取音频时长（微秒）","title":"get_audio_duration","mainColor":"#CA61FF"}}}],"edges":[{"sourceNodeID":"121555","targetNodeID":"131139","sourcePortID":"batch-function-inline-output"},{"sourceNodeID":"131139","targetNodeID":"133787"},{"sourceNodeID":"133787","targetNodeID":"187299","sourcePortID":"true"},{"sourceNodeID":"133787","targetNodeID":"184845","sourcePortID":"false"},{"sourceNodeID":"1667619","targetNodeID":"187299"},{"sourceNodeID":"187299","targetNodeID":"121555","targetPortID":"batch-function-inline-input"},{"sourceNodeID":"184845","targetNodeID":"1667619"},{"sourceNodeID":"121555","targetNodeID":"182040","sourcePortID":"batch-function-inline-output"},{"sourceNodeID":"182040","targetNodeID":"158063"},{"sourceNodeID":"158063","targetNodeID":"121555","targetPortID":"batch-function-inline-input"}],"_temp":{"bounds":{"x":-1279.3650319718045,"y":71.36646779155997,"width":360,"height":112},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Batch-v2.jpg","description":"通过设定批量运行次数和逻辑，运行批处理体内的任务","title":"批处理","mainColor":"#00B2B2"}}},{"id":"134671","type":"31","meta":{"position":{"x":-2814.9478024651603,"y":209.36646779155996}},"data":{"size":{"height":150,"width":240},"inputs":{"schemaType":"slate","note":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"输入文案主题、分镜数量，自动根据主题生成视频\",\"type\":\"text\"}]}]"}},"_temp":{"bounds":{"x":-2934.9478024651603,"y":209.36646779155996,"width":240,"height":150},"externalData":{"icon":"comment_icon","description":"comment_desc","title":"注释","mainColor":""}}},{"id":"100001","type":"1","meta":{"position":{"x":-2754.9478024651603,"y":84.36646779155997}},"data":{"nodeMeta":{"description":"工作流的起始节点，用于设定启动工作流需要的信息","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Start-v2.jpg","subTitle":"","title":"开始"},"outputs":[{"type":"string","name":"theme","required":true},{"type":"integer","name":"count","required":true}],"trigger_parameters":[]},"_temp":{"bounds":{"x":-2934.9478024651603,"y":84.36646779155997,"width":360,"height":86},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Start-v2.jpg","description":"工作流的起始节点，用于设定启动工作流需要的信息","title":"开始","mainColor":"#5C62FF"}}},{"id":"900001","type":"2","meta":{"position":{"x":2199.0213617364307,"y":879.5823251414896}},"data":{"nodeMeta":{"description":"工作流的最终节点，用于返回工作流运行后的结果信息","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-End-v2.jpg","subTitle":"","title":"结束"},"inputs":{"terminatePlan":"returnVariables","inputParameters":[{"name":"output","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"169807","name":"output"},"rawMeta":{"type":1}}}}]}},"_temp":{"bounds":{"x":2019.0213617364307,"y":879.5823251414896,"width":360,"height":112},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-End-v2.jpg","description":"工作流的最终节点，用于返回工作流运行后的结果信息","title":"结束","mainColor":"#5C62FF"}}},{"id":"151598","type":"23","meta":{"position":{"x":-1099.3650319718045,"y":-302.0328121425401}},"data":{"inputs":{"canvasSchema":"{\"version\":\"6.0.0-rc2\",\"width\":1920,\"height\":1080,\"backgroundColor\":\"#000000fe\",\"customVariableRefs\":[{\"variableId\":\"L62wa3yxA7bsmKSA1_Nkb\",\"objectId\":\"pd7ocqauCYGySg5nWDH46\",\"variableName\":\"key\"}],\"objects\":[{\"fontSize\":220,\"fontWeight\":\"normal\",\"fontFamily\":\"字语逸风手书\",\"fontStyle\":\"normal\",\"lineHeight\":2.5,\"text\":\"四字词语\",\"charSpacing\":0,\"textAlign\":\"left\",\"styles\":[],\"pathStartOffset\":0,\"pathSide\":\"left\",\"pathAlign\":\"baseline\",\"underline\":false,\"overline\":false,\"linethrough\":false,\"textBackgroundColor\":\"\",\"direction\":\"ltr\",\"minWidth\":20,\"splitByGrapheme\":true,\"width\":886.2754,\"height\":215.5263,\"editable\":true,\"backgroundColor\":\"\",\"padding\":55,\"customFixedHeight\":215.52631578947364,\"customId\":\"pd7ocqauCYGySg5nWDH46\",\"customType\":\"block_text\",\"type\":\"Textbox\",\"version\":\"6.0.0-rc2\",\"originX\":\"left\",\"originY\":\"top\",\"left\":508.9995,\"top\":395.9474,\"fill\":\"#FF9600fe\",\"stroke\":\"#000000fe\",\"strokeWidth\":0,\"strokeDashArray\":null,\"strokeLineCap\":\"butt\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"miter\",\"strokeUniform\":false,\"strokeMiterLimit\":4,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0,\"clipPath\":{\"rx\":0,\"ry\":0,\"width\":996.2754,\"height\":325.5263,\"backgroundColor\":\"\",\"padding\":0,\"type\":\"Rect\",\"version\":\"6.0.0-rc2\",\"originX\":\"left\",\"originY\":\"top\",\"left\":-498.1377,\"top\":-162.7632,\"fill\":\"rgb(0,0,0)\",\"stroke\":null,\"strokeWidth\":1,\"strokeDashArray\":null,\"strokeLineCap\":\"butt\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"miter\",\"strokeUniform\":false,\"strokeMiterLimit\":4,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0,\"inverted\":false,\"absolutePositioned\":false}}],\"background\":\"#000000fe\"}","inputParameters":[{"name":"key","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"1165778","name":"key"},"rawMeta":{"type":1}}},"id":"L62wa3yxA7bsmKSA1_Nkb"}],"settingOnError":{"processType":1,"timeoutMs":60000,"retryTimes":0}},"nodeMeta":{"description":"自定义画板排版，支持引用添加文本和图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon_DrawingBoard_v2.jpg","mainColor":"#FF4DC3","subTitle":"画板","title":"画板"},"outputs":[{"type":"string","assistType":2,"name":"data"},{"type":"string","name":"msg"}],"settingOnError":{"processType":1,"timeoutMs":60000,"retryTimes":0}},"_temp":{"bounds":{"x":-1279.3650319718045,"y":-302.0328121425401,"width":360,"height":112},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon_DrawingBoard_v2.jpg","description":"自定义画板排版，支持引用添加文本和图片","title":"画板","mainColor":"#FF4DC3"}}},{"id":"1859832","type":"4","meta":{"position":{"x":-556.2178998915388,"y":-314.0328121425401}},"data":{"nodeMeta":{"description":"根据音色和文本合成音频","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/dc534eb73e7046b1807db96af7c0e212~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1749019302&x-signature=ANAaS2aakkuW4eUDLIx7DP8XEoI%3D","subtitle":"语音合成:speech_synthesis","title":"speech_synthesis_main"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7426655854067367946","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"speech_synthesis","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7426655854067351562","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"语音合成","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"text","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"1165778","name":"main"},"rawMeta":{"type":1}}}},{"name":"speed_ratio","input":{"type":"float","value":{"type":"literal","content":1,"rawMeta":{"type":4}}}},{"name":"voice_id","input":{"type":"string","assistType":12,"value":{"type":"literal","content":"7468512265151725595","rawMeta":{"fileName":"霸气青叔","type":18}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"float","name":"code","required":false},{"type":"object","name":"data","schema":[{"type":"float","name":"duration","required":false,"description":"音频时长，单位是s"},{"type":"string","name":"link","required":false}],"required":false},{"type":"string","name":"log_id","required":false},{"type":"string","name":"msg","required":false}]},"_temp":{"bounds":{"x":-736.2178998915388,"y":-314.0328121425401,"width":360,"height":136},"externalData":{"icon":"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/372098605791453_1729153029627658847_7vpeyBUsGn.jpeg?lk3s=cd508e2b&x-expires=1764412297&x-signature=XqwxRVi5OcX%2BGA9Dbj3PjNR9SYs%3D","apiName":"speech_synthesis","pluginID":"7426655854067351562","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7315016311652941851","inputs":[{"assistType":12,"description":"扣子音色 ID，支持选择扣子系统预置的音色或资源库中复刻的音色。 可以在操作页面直接选择音色，或通过系统音色列表https://www.coze.cn/open/docs/dev_how_to_guides/sys_voice查看音色 ID。","input":{},"name":"voice_id","required":false,"type":"string"},{"description":"语音情感","input":{},"name":"emotion","required":false,"type":"string"},{"defaultValue":3,"description":"调用emotion设置情感参数后可使用emotion_scale进一步设置情绪值，范围1~5，不设置时默认值为4。 注：理论上情绪值越大，情感越明显。但情绪值1~5实际为非线性增长，可能存在超过某个值后，情绪增加不明显，例如设置3和5时情绪值可能接近。","input":{},"name":"emotion_scale","required":false,"type":"float"},{"description":"音色的语种，非必填，所有中文音色支持中英文混合场景。可参考系统音色列表https://www.coze.cn/open/docs/dev_how_to_guides/sys_voice查看各音色支持的语种。","input":{},"name":"language","required":false,"type":"string"},{"defaultValue":"爽快思思/Skye","description":"音色ID，默认为爽快思思/Skye。详细音色列表参考 https://www.coze.cn/open/docs/guides/text_to_speech_plugin, default value is 爽快思思/Skye","input":{},"name":"speaker_id","required":false,"type":"string"},{"defaultValue":1,"description":"语速，范围是[0.2,3]，默认为1，通常保留一位小数即可, default value is 1","input":{},"name":"speed_ratio","required":false,"type":"float"},{"description":"要合成音频的文本内容","input":{},"name":"text","required":true,"type":"string"}],"outputs":[{"input":{},"name":"data","required":false,"schema":[{"description":"音频时长，单位是s","input":{},"name":"duration","required":false,"type":"float"},{"input":{},"name":"link","required":false,"type":"string"}],"type":"object"},{"input":{},"name":"log_id","required":false,"type":"string"},{"input":{},"name":"msg","required":false,"type":"string"},{"input":{},"name":"code","required":false,"type":"float"}],"updateTime":1761816746,"channel_id":2,"commercial_setting":{"business_type":1,"commercial_type":1},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"根据音色和文本合成音频。按照字符数计费，计费项&免费额度说明：https://www.coze.cn/open/docs/coze_pro/asr_tts_fee。使用资源库音色时，计费项为复刻音色文字转语音字数；使用预设音色时，模型为大模型对应系统音色文字转语音字数，小模型对应小模型合成次数 。","title":"speech_synthesis","mainColor":"#CA61FF"}}},{"id":"1088914","type":"4","meta":{"position":{"x":-28.06634182872176,"y":-302.0328121425401}},"data":{"nodeMeta":{"description":"获取音频时长（微秒）","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/891f6d27546b4bc9bcf9b63c6f9c9373~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1758077933&x-signature=llFA%2Ba6ed6Tg%2BfbPGMN2lCB2DHA%3D","subtitle":"剪映草稿数据生成工具:get_audio_duration","title":"get_audio_duration_main"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7537989256854372386","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"get_audio_duration","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7537989256854306850","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映草稿数据生成工具","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"url","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"1859832","name":"data.link"},"rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"integer","name":"duration","required":true,"description":"时长（微秒）"}]},"_temp":{"bounds":{"x":-208.06634182872176,"y":-302.0328121425401,"width":360,"height":112},"externalData":{"icon":"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/1722314331273307_1755133364874511740_tsEgHECun3.png?lk3s=cd508e2b&x-expires=1764412297&x-signature=bubaf2HFBRUOW2TNmNE0iQFE4iw%3D","apiName":"get_audio_duration","pluginID":"7537989256854306850","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7491992518092357686","inputs":[{"description":"音频地址","input":{},"name":"url","required":true,"type":"string"}],"outputs":[{"description":"时长（微秒）","input":{},"name":"duration","required":true,"type":"integer"}],"updateTime":1761479471,"channel_id":2,"commercial_setting":{},"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"获取音频时长（微秒）","title":"get_audio_duration","mainColor":"#CA61FF"}}}],"edges":[{"sourceNodeID":"100001","targetNodeID":"105538"},{"sourceNodeID":"105538","targetNodeID":"1165778"},{"sourceNodeID":"1466509","targetNodeID":"107619"},{"sourceNodeID":"107619","targetNodeID":"1698626"},{"sourceNodeID":"1698626","targetNodeID":"106125"},{"sourceNodeID":"106125","targetNodeID":"164177"},{"sourceNodeID":"164177","targetNodeID":"175385"},{"sourceNodeID":"175385","targetNodeID":"127991"},{"sourceNodeID":"127991","targetNodeID":"1812263"},{"sourceNodeID":"1812263","targetNodeID":"167996"},{"sourceNodeID":"167996","targetNodeID":"169807"},{"sourceNodeID":"169807","targetNodeID":"900001"},{"sourceNodeID":"1565313","targetNodeID":"142888"},{"sourceNodeID":"142888","targetNodeID":"1466509"},{"sourceNodeID":"121555","targetNodeID":"1565313","sourcePortID":"batch-output"},{"sourceNodeID":"1088914","targetNodeID":"1565313"},{"sourceNodeID":"1165778","targetNodeID":"121555"},{"sourceNodeID":"1165778","targetNodeID":"151598"},{"sourceNodeID":"151598","targetNodeID":"1859832"},{"sourceNodeID":"1859832","targetNodeID":"1088914"}]},"bounds":{"x":-2934.9478024651603,"y":-314.0328121425401,"width":5313.969164201591,"height":1579.31331705701}}